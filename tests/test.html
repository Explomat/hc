<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript">
		function getPercentComplete(fact, min, targ, max){
		  if (fact === ''){
		    return 0;
		  }

		  var percent = 0;

		  fact = parseFloat(fact);
		  min = parseFloat(min);
		  targ = parseFloat(targ);
		  max = parseFloat(max);

		  fact = isNaN(fact) ? '' : fact;
		  min = isNaN(min) ? '' : min;
		  targ = isNaN(targ) ? '' : targ;
		  max = isNaN(max) ? '' : max;

		  if (min === '' && max === '' && targ !== ''){
		    percent = fact == targ ? 1 : 0;
		  }
		  else {

		    if (min == targ || min === '') {
		      if (max > targ) {
		        percent = fact < targ ? 0 : 1;
		      }
		      else {
		        percent = fact > targ ? 0 : 1;
		      }
		    }
		    else {
		      if (max == targ || max === ''){
		        if (min < targ){
		          if (fact <= min){
		            percent = 0;
		          }
		          else {
		            percent = fact < targ ? (fact - min) / (targ - min) : 1;
		          }
		        }
		        else {
		          if (fact >= min){
		            percent = 0;
		          }
		          else {
		            percent = fact > targ ? (fact - min) / (targ - min) : 1;
		          }
		        }
		      }
		      else {
		        if (min < max){
		          if (fact <= min) {
		            percent = 0;
		          }
		          else {
		            percent = fact <= targ ? (fact - min)/(targ - min) : 1;
		          }
		        }
		        else {
		          if (fact >= min){
		            percent = 0;
		          }
		          else{
		            percent = fact >= targ ? (fact - min)/(targ - min) : 1;
		          }
		        }
		      }
		    }
		  }
		  return Math.round(percent * 100);
		}
		function _isTasks(blocks){
			var isContains = false;
			if (blocks) {
				var filteredBlocks = blocks.filter(function(item) {
					if (item.tasks){
						var filteredTasks = item.tasks.filter(function(t){
							return t.title && t.weight === '100' && t.min && t.targ && t.max;
						});
						return filteredTasks.length === item.tasks.length;
					}
					return false;
				});
				isContains = filteredBlocks.length > 0;
			}
			return isContains;
		}
		var blocks = [
			{
				"title": "Основные задачи/Проекты на 2016 год",
				"tasks": [
					{
						"title": "1",
						"unit": "2",
						"weight": "100",
						"min": "1",
						"targ": "2",
						"max": "3",
						"fact": "",
						"comment": ""
					},
					{
						"title": "12",
						"unit": "2",
						"weight": "00",
						"min": "1",
						"targ": "2",
						"max": "3",
						"fact": "",
						"comment": ""
					},
					{
						"title": "www",
						"unit": "eee",
						"weight": "00",
						"min": "1",
						"targ": "2",
						"max": "3",
						"fact": "",
						"comment": ""
					}
				]
			}
		]
		//console.log(_isTasks(blocks));
		console.log(getPercentComplete(22, 5, 20, 31));
		console.log(getPercentComplete(4.77, 12, 6.32, 0));
	</script>
</head>
<body>

</body>
</html>